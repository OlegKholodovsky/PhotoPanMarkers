{% extends 'base.html' %}

{% block content %}
{% load static %}
<body>

    <div id="viewer-container">
        <div class="loader">Загрузка...</div>
        <div class="transition-overlay"></div>
    </div>

    <script src="{% static '/js/app.js' %}"></script>



<!--

<div id="subscription-form" style="position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">
    <h3 style="margin-top: 0; text-align: center;">Подписка на рассылку</h3>
    <form id="subscribe-form">
        {% csrf_token %}
        <div style="margin-bottom: 15px;">
            <input type="text" name="name" placeholder="Ваше имя" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <div id="name-error" style="color: red; font-size: 12px; display: none;"></div>
        </div>
        <div style="margin-bottom: 15px;">
            <input type="email" name="email" placeholder="Ваш email" required style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <div id="email-error" style="color: red; font-size: 12px; display: none;"></div>
        </div>
        <button type="submit" style="background: #4CAF50; color: white; border: none; padding: 10px 15px; border-radius: 4px; cursor: pointer; width: 100%;">Подписаться</button>
    </form>
    <div id="success-message" style="color: green; margin-top: 10px; display: none;"></div>
</div>

<script>
document.getElementById('subscribe-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Сброс ошибок
    document.getElementById('name-error').style.display = 'none';
    document.getElementById('email-error').style.display = 'none';
    
    // Получение данных формы
    const formData = new FormData(this);
    
    // AJAX-запрос
    fetch('/subscribe/', {
        method: 'POST',
        body: formData,
        headers: {
            'X-Requested-With': 'XMLHttpRequest',
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Успешная подписка
            document.getElementById('subscribe-form').reset();
            const successMsg = document.getElementById('success-message');
            successMsg.textContent = data.message;
            successMsg.style.display = 'block';
            
            // Скрываем сообщение через 5 секунд
            setTimeout(() => {
                successMsg.style.display = 'none';
            }, 5000);
        } else {
            // Ошибки валидации
            if (data.errors.name) {
                const nameError = document.getElementById('name-error');
                nameError.textContent = data.errors.name[0];
                nameError.style.display = 'block';
            }
            if (data.errors.email) {
                const emailError = document.getElementById('email-error');
                emailError.textContent = data.errors.email[0];
                emailError.style.display = 'block';
            }
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
});
</script>
-->


</body>
{% endblock content %}